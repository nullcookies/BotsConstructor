@{

    Layout = "_LayoutHome";
}

<link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" />
<link href="https://cdn.jsdelivr.net/gh/gitbrent/bootstrap4-toggle@3.5.0/css/bootstrap4-toggle.min.css" rel="stylesheet" />
<link href="@Url.Content("~/lib/open-iconic/font/css/open-iconic-bootstrap.css")" rel="stylesheet" />
<link href="~/css/TreeEditor.css" rel="stylesheet" />
<script src="~/lib/jqueryui/jquery-ui.min.js"></script>
<script src="~/js/CoreTreeEditor.js"></script>
<script src="~/js/SalesNodes.js"></script>

<div id="left-menus">
    <ul class="nav nav-tabs" id="left-tabs" role="tablist">
        <li class="nav-item">
            <a class="nav-link" id="sidebar-tab" data-toggle="tab" href="#sidebar" role="tab" aria-controls="sidebar" aria-selected="false">Menu</a>
        </li>
        <li class="nav-item">
            <a class="nav-link active" id="nodes-tab" data-toggle="tab" href="#nodes-menu" role="tab" aria-controls="nodes-menu" aria-selected="true">Nodes</a>
        </li>
    </ul>
    <div class="tab-content" id="left-content">
        <div class="tab-pane fade show active" id="nodes-menu" role="tabpanel" aria-labelledby="nodes-tab"></div>
    </div>
</div>

<script>
    let jqLeft = $("#left-menus").detach();
    let jqSidebar = $("#sidebar-wrapper");
    let jqNewWrapper = jqSidebar.children(":not(.sidebar-heading)").wrapAll(document.createElement("div")).parent().
        first().attr("id", "sidebar").addClass("tab-pane fade").attr("role", "tabpanel").
        attr("aria-labelledby", "sidebar-tab").detach();
    jqSidebar.append(jqLeft);
    jqLeft.find("#left-content").append(jqNewWrapper);
</script>

@*<div>TEST UPLOAD <input type="file" id="test-file-input" />
    <button onclick="
    $.ajax({
        url: 'https://api.telegram.org/bot874394768:AAHNuAw_Npa4upCbXEZyagWTRzffVL2MUp8/sendDocument',
        type: 'post',
        data: (function () {
            var fd = new FormData();
            console.log($('#test-file-input')[0].files[0].type);
            fd.append('document', $('#test-file-input')[0].files[0]);
            fd.append('chat_id', 389063743);
            return fd;
        })(), 
        contentType: false, 
        processData: false, 
        success: function(response){ 
            console.log(response);
        },
        error: function (xhr, stat, err) {
            console.log(xhr);
        }
    })">UPLOAD</button>
</div>*@

<div id="main-container"></div>

<script>
    let nodesMenu = $("#nodes-menu");
    for (let i = nodeTypes.root + 1; i < templates.length; i++) {
        nodesMenu.append(templates[i].container);
    }
    let root = templates[nodeTypes.root];
    let main = $(root.container).attr("id", "main");
    $("#main-container").append(main);
    for (let i = 0; i < 10; i++) {
        let child = templates[2].cloneNode();
        root.appendChild(child);
        child.appendChild(templates[3].cloneNode());
    }
</script>